# üîç –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
DISPATCH ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å –ø–æ—á—Ç–æ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–º YandexTracker.
–°–∏—Å—Ç–µ–º–∞ —á–∏—Ç–∞–µ—Ç –ø–∏—Å—å–º–∞ –∏–∑ –ø–æ—á—Ç—ã (–ø–∞–ø–∫–∏ –í–•–û–î–Ø–©–ò–ï –∏ –û–¢–ü–†–ê–í–õ–ï–ù–ù–´–ï) –∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —ç—Ç–∏—Ö –ø–∏—Å–µ–º —Å–æ–∑–¥–∞–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç.
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç—Ç–æ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç –Ω–∞ —Å–∞–º–æ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç—Ä–µ–∫–µ—Ä–µ.
–ï—Å–ª–∏ –∑–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–º –µ—â—ë –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –æ–ø–æ—Ä–∞ –∏/–∏–ª–∏ –Ω–æ–º–µ—Ä –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–Ω—Ü–∏–∏, –ø—ã—Ç–∞–µ–º—Å—è –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –ø–∏—Å—å–º–∞ –∏–ª–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Ö.
–î–∞–ª–µ–µ –ø–æ API yandex tracker –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã –≤ –æ—á–µ—Ä–µ–¥—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á–∏. –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—Ç–æ–≤–∞—Ç—å —Ç–µ–º–µ –ø–µ—Ä–≤–æ–≥–æ –ø–∏—Å—å–º–∞ –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∫–∏, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–¥–∞—á–∏.
–ï—Å–ª–∏ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –Ω–∞ –ø–∏—Å—å–º–æ, —Ç–æ–≥–¥–∞ –æ–Ω –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫ –∑–∞–¥–∞—á–µ –≤–≤–∏–¥–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ YandexTracker –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Å–∏—Å—Ç–µ–º–æ–π. –¢–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä —É–∫–∞–∂–µ—Ç —â–∏—Ñ—Ä –æ–ø–æ—Ä—ã, —Ç–æ–≥–¥–∞ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—É –≤ —Å–∏—Å—Ç–µ–º–µ,
–∞ –≤ —Ç—Ä–µ–∫–µ—Ä–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø–æ–¥—Ä—è–¥—á–∏–∫—É —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∑–∞ –¥–∞–Ω–Ω–æ–π –æ–ø–æ—Ä–æ–π. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ç—Ä–µ–∫–µ—Ä–µ –≤–≤–µ–¥–µ—Ç –Ω–µ –≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω–∏—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –Ω–∞ "–û—à–∏–±–∫–∞" –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è 
–æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç–≤–µ—Ç —á—Ç–æ –Ω–µ —Ç–∞–∫.

–í —Å–∏—Å—Ç–µ–º–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã. 
- –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ "–ü–µ—Ä–µ–¥–∞—Ç—å –≤ —Ä–∞–±–æ—Ç—É –ø–æ–¥—Ä—è–¥—á–∏–∫—É" —Å–∏—Å—Ç–µ–º–∞ —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —à–∞–±–ª–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –¥–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ
- –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ "–£–≤–µ–¥–æ–º–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞" —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–∏—Ç –∑–∞—è–≤–∏—Ç—è–ª—è, —á—Ç–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø—Ä–∏–Ω—è–ª –∑–∞—è–≤–∫—É –≤ —Ä–∞–±–æ—Ç—É
- –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ "–£–≤–µ–¥–æ–º–∏—Ç—å –æ –∑–∞–∫—Ä—ã—Ç–∏–∏" —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç —à–∞–±–ª–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –∑–∞—è–≤–∏—Ç–µ–ª —á—Ç–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç –∑–∞–∫—Ä—ã—Ç

–°–∏—Å—Ç–µ–º–∞ —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç SLA –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞. –ï—Å–ª–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç –±—ã–ª —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç–æ–≥–¥–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ—á–∫–∏ –æ—Ç—Å—á–µ—Ç–∞ –±—É–¥–µ—Ç –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –ø–∏—Å—å–º–∞ –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ, –µ—Å–ª–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç –±—ã–ª –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏–∏—Ä–æ–≤–∞–Ω –≤—Ä—É—á–Ω—É—é
–∏–∑ —Ç—Ä–µ–∫–µ—Ä–∞, —Ç–æ–≥–¥–∞ —ç—Ç–æ –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞. –ß—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–µ–¥–ª–∞–π–Ω –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞, –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É —Å–∞–º–æ–º—É –Ω–∞–¥–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Ç—Ä–µ–∫–µ—Ä–∞ –≤—ã–±—Ä–∞—Ç—å —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã. 
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ –∑–∞–¥–∞—á–µ –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–¥–ª–∞–π–Ω–µ SLA –∏ –µ–≥–æ —Å—Ç–∞—Ç—É—Å–µ.

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –≤ —Ç—Ä–µ–∫–µ—Ä–µ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –ø–æ—ç—Ç–æ–º—É —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –ø—Ä–∏—à–æ–ª –ª–∏ –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—É, –≤ —Ç—Ä–µ–∫–µ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ "–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ–≥–¥–∞ –∫–æ–≥–¥–∞ –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—É –ø—Ä–∏—Ö–æ–¥–∏—Ç —É—Ç–æ—á–Ω–µ–Ω–∏–µ.

–ö–æ–≥–¥–∞ –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∏–∑ YandexTracker –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∏–∫–∞–∫ –æ—Ç–≤–µ—Ç –æ–¥–Ω–æ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –∞ –∫–∞–∫ —Å–æ–≤–µ—Ä—â–µ–Ω–Ω–æ –Ω–æ–≤–æ–µ. –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ç–µ–º–µ –ø–∏—Å—å–º–∞ –∫–æ–¥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –≤ –∫–æ–ø–∏—é —Å—Ç–∞–≤–∏—Ç—å email –∞–¥—Ä–µ—Å, —Å —á—å–µ–π –ø–æ—á—Ç—ã –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –ø–∏—Å—å–º–∞ –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞.
–¢–æ–≥–¥–∞ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–º–µ–Ω–∏—Ç —Ç–µ–º—É –ø–∏—Å—å–º–∞, –º—ã –Ω–µ –ø–æ—Ç–µ—Ä—è–º —Ü–µ–ø–æ—á–∫—É –ø–µ—Ä–µ–ø–∏—Å–∫–∏, –∞ –∫–æ–¥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–Ω—Å–æ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–≤–µ—Ç–æ–º –ø–æ —É–∂–µ —Å—É–µ—Å—Ç–≤—É—é—â–µ–º—É –∏–Ω—Ü–∏–¥–µ–Ω—Ç—É –∏–ª–∏ –ø–æ –Ω–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç.




# dispatch
–°–µ—Ä–≤–µ—Ä –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏–∏, –∑–∞–≤—è–∑–∞–Ω–Ω—ã–π –Ω–∞ YandexTracker

python 3.12

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–∫–µ—Ç—ã
sudo apt update && sudo apt upgrade -y

# –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt install -y ca-certificates curl gnupg lsb-release

# –î–æ–±–∞–≤–ª—è–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π GPG-–∫–ª—é—á Docker
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
  https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker –∏ docker-compose
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sudo systemctl enable docker
sudo systemctl start docker
docker --version

# –ó–∞–ø—É—Å–∫ PostgreSQL
sudo docker compose up -d

# –ó–∞–ø—É—Å–∫ managment –∫–æ–º–∞–Ω–¥ –≤ —Ñ–æ–Ω–µ
nohup python manage.py my_command > my_command.log 2>&1 &


# –î–ª—è —Ä–∞–±–æ—Ç—ã –Ø–Ω–¥–µ–∫—Å —Ç—Ä–µ–∫–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–µ –ø–æ–ª—è –∏ –≤ —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
–æ—á–µ—Ä–µ–¥–∏ –¥–æ–±–∞–≤–∏—Ç—å –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–∫–ª—é—á incident)


# –ö–æ–º–∞–Ω–¥—ã, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª–∞–º–∏ &&, –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ;
# –≤—Ç–æ—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–≤–∞—è –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ.
# –ö–ª—é—á --build –¥–ª—è docker compose up –æ–∑–Ω–∞—á–∞–µ—Ç,
# —á—Ç–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
sudo docker compose stop && sudo docker compose up --build -d

<!-- sudo docker container ls -a -->


# ==================================================
# CRON JOBS CONFIGURATION
# ==================================================
# m h dom mon dow user  command
# | |  |   |   |   |    |
# | |  |   |   |   |    +--- –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
# | |  |   |   |   +-------- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# | |  |   |   +------------ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0-7, 0=7=–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
# | |  |   +---------------- –º–µ—Å—è—Ü (1-12)
# | |  +-------------------- –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ (1-31)
# | +----------------------- —á–∞—Å (0-23)
# +------------------------- –º–∏–Ω—É—Ç–∞ (0-59)

–û—à–∏–±–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –≤–∞—à crontab —Ñ–∞–π–ª –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π ‚Äî cron —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–π –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π.

# –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00:
0 0 * * * root cd /app && python manage.py delete_unknown_files >> /app/logs/cron.log 2>&1

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ TimescaleDB - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 20:00:
0 20 * * * root cd /app && python manage.py update_data_from_ts >> /app/logs/cron.log 2>&1

# ==================================================
# –ü–û–õ–ï–ó–ù–´–ï –ü–†–ò–ú–ï–†–´:
# ==================================================
# * * * * *    - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
# 0 * * * *    - –∫–∞–∂–¥—ã–π —á–∞—Å –≤ –Ω–∞—á–∞–ª–µ —á–∞—Å–∞
# 0 12 * * *   - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 12:00
# 0 0 * * 0    - –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 00:00
# 0 0 1 * *    - –ø–µ—Ä–≤–æ–≥–æ —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞
# */5 * * * *  - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç


–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –≥–¥–µ –ª–µ–∂–∏—Ç —Ñ–∞–π–ª docker-compose.yml, –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
–û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª dispatch_backend
sudo docker compose exec dispatch_backend bash


sudo docker compose -f docker-compose.production.yml up







mkdir -p ./logs/supervisor
sudo chmod -R 777 ./logs
sudo chmod -R 777 ./data


rm -rf ~/.vscode-server
sudo chmod -R 777 /home/a.choliy/dispatch/logs







ALTER SEQUENCE public.emails_emailmessage_id_seq RESTART WITH 10000;
ALTER SEQUENCE public.incidents_incident_id_seq RESTART WITH 10000;


–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–¥–µ —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞!


sudo docker ps -a

<!-- –ü–æ–¥–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ë–î -->
sudo docker compose up -d dispatch_db

python manage.py generateschema > schema.yaml


–ö–æ–ª-–≤–æ —è–¥–µ—Ä (–Ω—É–∂–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ gunicorn)
lscpu | grep "^CPU(s):"

–ö–æ–ª-–≤–æ –ø–æ—Ç–æ–∫–æ–≤ (–Ω—É–∂–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ gunicorn)
lscpu | grep "Thread(s) per core"

–§–æ—Ä–º—É–ª–∞ –¥–ª—è workers:
workers = 2 * CPU + 1

–ö–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏:
free -h
