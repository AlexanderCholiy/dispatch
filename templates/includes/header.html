{% load static %}

<header id="header" class="site-header">
  <!-- Левый блок: кнопка сайдбара + логотип -->
  <div class="header-left">
    <button id="sidebar-toggle" class="btn-toggle tooltip" data-title="Меню">
      <i class="bx bx-menu"></i>
    </button>
    <div class="logo">
      <a href="{% url 'emails:index' %}" class="tooltip" data-title="На главную">
        <img
          src="{% static 'img/logo_light.png' %}"
          alt="Логотип NT Cellular Systems"
          class="logo-img logo-light"
        >
        <img
          src="{% static 'img/logo_dark.png' %}"
          alt="Логотип NT Cellular Systems"
          class="logo-img logo-dark"
        >
      </a>
    </div>
  </div>

  <!-- Центр: поиск -->
  {% if user.is_authenticated %}
    <div id="search-bar" class="header-center">
      {% include "includes/search_bar.html" %}
    </div>
  {% endif %}

  <!-- Правый блок: тема + пользователь -->
  <div class="header-right">
    <button id="theme-toggle" class="tooltip" data-title="Переключить тему">
      <i id="theme-icon" class="bx bx-sun"></i>
    </button>

    <div class="user-menu-wrapper">
      <button 
        id="user-toggle" 
        class="tooltip"
        data-title="{% if user.is_authenticated %}{{ user.username }}{% else %}Профиль{% endif %}">
        {% if user.is_authenticated %}
          {% if user.avatar and user.avatar.url %}
            <img src="{{ user.avatar.url }}" class="user-icon" alt="{{ user.username }}">
          {% else %}
            <div class="user-icon tooltip" data-title="{{ user.username }}">{{ user.username|first|upper }}</div>
          {% endif %}
        {% else %}
          <div class="user-icon tooltip" data-title="Профиль">X</div>
        {% endif %}
      </button>
      <div id="user-menu" class="user-menu">
        {% include "includes/user_menu.html" %}
      </div>
    </div>
  </div>
</header>
